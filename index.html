<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        // // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
				// // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser

		for (var i = 0; i < geemails.length; i++){

			var mainBox = document.createElement("div");
			mainBox.className = "mainPage";
			document.getElementById("main").appendChild(mainBox);

			var senderBox = document.createElement("div");
			senderBox.className = "senderName";
			senderBox.innerHTML = "From: " + geemails[i].sender;
			mainBox.appendChild(senderBox);

			var dateBox = document.createElement("div");
			dateBox.className = "dateLine";
			dateBox.innerHTML = "Date: " + geemails[i].date;
			mainBox.appendChild(dateBox);

			var subjectBox = document.createElement("div");
			subjectBox.className = "subjectLine";
			subjectBox.innerHTML = "Subject: " + geemails[i].subject;
			mainBox.appendChild(subjectBox);

			var bodyBox = document.createElement("p");
			bodyBox.className = "bodyLine";
			bodyBox.innerHTML = geemails[i].body;
			mainBox.appendChild(bodyBox);
		}

			var getSubject = document.getElementsByClassName("subjectLine");
			for(var j = 0; j < getSubject.length; j++){
				console.log(getSubject[j]);
				getSubject[j].addEventListener("click", hideElem);

			function hideElem(){
				var bodyElem = this.querySelectorAll(".bodyLine")[0];
				if(bodyElem.style.display === "none"){
					bodyElem.style.display = "block";
				}else{
					bodyElem.style.display = "none";
				}
			}
			var getMailCount = geemails.length;
			
			var count = document.createElement("div");
			count.id = "count";
			mainHeader.appendChild(count);

			var addMail = getNewMessage();
			var randomMail = addMail[Math.floor(Math.random()*getNewMessage.length)];
		}

		function newMessage (){

			var addMainBox = document.createElement("div");
			addMainBox.className = "addMainPage";
			main.appendChild(addMainBox);

			//var randomMainBox = addMainBox[Math.floor(Math.random()*addMainBox.length)];
			
			var addSenderBox = document.createElement("div");
			addSenderBox.className = "senderName";
			addSenderBox.innerHTML = "From: " + addMail.sender;
			addMainBox.appendChild(addSenderBox);

			//var randomSender = addSenderBox[Math.floor(Math.random()*addSenderBox.length)];

			var addDateBox = document.createElement("div");
			addDateBox.classname = "dateLine";
			addDateBox.innerHTML = "Date: " + addMail.date;
			addMainBox.appendChild(addDateBox);

			//var randomDate = addDateBox[Math.floor(Math.random()*addDateBox.length)];

			var addSubjectBox = document.createElement("div");
			addSubjectBox.classname = "addSubjectLine";
			addSubjectBox.innerHTML = "Subject: " + addMail.subject;
			addMainBox.appendChild(addSubjectBox);

			var randomEmails = [addMainBox, addSenderBox, addDateBox, addSubjectBox];
			var randomRandoms = randomEmails[Math.floor(Math.random()*randomEmails.length)];

			//var randomSubject = addSubjectBox[Math.floor(Math.random()*addSubjectBox.length)];

			var addBodyBox = document.createElement("p");
			addBodyBox.classname = "addBodyLine";
			addBodyBox.innerHTML = addMail.body;
			addBodyBox.style.display = "none";
			addSubjectBox.appendChild(addBodyBox);

			getMailCount++;
			document.getElementById("count").innerHTML = "Inbox: " + "(" + getMailCount + ")";
			
			var getNewSubject = document.getElementsByClassName("addSubjectLine");
			for(var j=0; j<getNewSubject.length; j++){
				console.log(getNewSubject[j]);
				getNewSubject[j].addEventListener("click", hideNewElem);
			}
			function hideNewElem(){
				var newBodyElem = this.querySelectorAll(".addBodyLine")[0];
				if(newBodyElem.style.display === "none"){
					newBodyElem.style.display = "block";
				}else{
					newBodyElem.style.display = "none";
				}
			}
		}
setInterval(newMessage, 5000);

      };
	</script>
	<link href="https://fonts.googleapis.com/css?family=Modern+Antiqua" rel="stylesheet">
	</head>
	<body>
		<header>
			<div class="header" id="main">
					<header id = "mainHeader">
				<h1 id = "name"align="center">Oh Gee! <img src="email.jpg" alt="Logo" width="25";height="25"> It's GEE-MAIL!</h1>
				</div>
			</header>		
	</body>
</html>